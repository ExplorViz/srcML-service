{% load DjangoHelpers %}
{% for cat in doc.categories %}
    {% for entry in cat.entries %}
        <div class="displayedDocDefinition" style="padding-top:10px;border:1px solid black;">
            <h2 class="title"><a id="{{entry.linkName}}">{{entry.title}}</a></h2>
            <hr/>
            {% if entry.desc != "" %}
            <div class="discription">
                  <p>{{entry.desc}}</p>
            </div>
            {% endif %}

            <div class="elemenListing">
                <h3 class="subtitle">Element{% if entry.elements|length > 1 %}s{%endif%}</h3>
                <ul>
                {% for elem in entry.elements %}
                    <li>{{elem.QName|safe}}</li>
                {% endfor %}
                </ul>
            </div>
            
            {% if entry.subelements|length > 0 %}
            <div class="subelementListing">
                <h3 class="subtitle">Subelement{% if entry.subelements|length > 1 %}s{% endif %}</h3>
                <ul>
                {% for elem in entry.subelements %}
                    <li>{{elem.QName|safe}}</li>
                {% endfor %}
                </ul>
            </div>
            {% endif %}
            
            <!-- XPathQueries -->
            {% if entry.xpathQueries|length > 0 %}
            <div class="xpathQueries">
                <h3 class="exampleTitle">XPathQuer{% if entry.subelements|length > 1 %}ies{% else %}y{% endif %}</h3>
                {% for xpExample in entry.xpathQueries %}
                    <div class="xpathQueryExample">
                        <span class="xpathDesc">{{xpExample.desc|safe}}</span><code class="xpathExample">{{xpExample.xpath|safe}}</code>
                    </div>
                {% endfor %}
            </div>
            {% endif %}

            <!-- Example/s -->
            {% if entry.examples|length %}
            <div class="exampleListing">
                <h3>Example{% if entry.examples|length > 1 %}s{% endif %}</h3>
                {% for example in entry.examples %}
                    <div class="example">
                        <h4 class="subtitle">{% ifequal example.title "" %}{{forloop.counter}}{%else%}{{example.title}}{%endifequal%}</h4>
                        <pre class="sourceCodeExample" style="border:1px solid black; margin:3px;">{% HighlightSyntaxFromTree example.srcML doc.srcMLLanguage "code" %}</pre>
                        <pre class="srcMLExample" style="border:1px solid black; margin:3px;">{% HighlightSyntaxFromTree example.srcML doc.srcMLLanguage "srcML" %}</pre>
                    </div>
                {% endfor %}
            </div>
            {% endif %}
        </div>
    {% endfor %}
{% endfor %}


<!-- Operators table. -->
<h2><a id="operators">Operators</a></h2>
<hr />
<table border="1">
    <thead>
        <tr>
            <th>Name</th>
            <th>Operator</th>
            <th>srcML</th>
        </tr>
    </thead>
    <tbody>

    {% for cat in doc.categories %}
        {% for entry in cat.operators %}
        	{% include "OperatorTableEntry.html" with entry=entry %}    
        {% endfor %}
    {% endfor %}
    {% for entry in doc.operators %}
        {% include "OperatorTableEntry.html" with entry=entry %}
    {% endfor %}
    </tbody>
</table>
