<TagDoc title="srcML Element Documenation" fileName="srcMLElements.html">
    <Desc>
<p clas="description">The following grammar documentation is presented using a notation similar to RELAX NG is used.
We have extended RELAX NG in order to present our grammar in a simple way. The extensions
used allow for the specification of mixed content among child elements, instead of 
using <code>text</code>, where specific values of mixed content are known.  This
includes things like keywords and some punctuators. Because of this the grammar
provided here can not be used to validate the XML representation of srcML.</p>

<p clas="description">The presented grammar doesn't explicitly list all places where comments,
preprocessor directives and macros can be used. This is because, both can occur almost
anywhere. When reading the grammar make the assumption that either a comments,
preprocessor directives and  macros can be interleaved amongst the grammar. 
</p>

</Desc>

    <RelaxNGHelp title="RELAX NG Quick Reference">
        <Desc>
<p>RELAX NG is a simple schema language for XML, based on [RELAX] and [TREX]. A
RELAX NG schema specifies a pattern for the structure and content of an XML document.
A RELAX NG schema thus identifies a class of XML documents consisting of those
documents that match the pattern.</p>
<p>For more information please see <a href="http://relaxng.org/compact-tutorial-20030326.html">this tutorial</a></p>
        </Desc>
        <Entry title="element">
            <GrammarText><span class="rn_kw">element</span> <span class="replacePartOfGrammar">identifier</span> { <span class="replacePartOfGrammar">sub rules</span> }</GrammarText>
            <Desc>The element describes an element within an XML DTD. <code class="replacePartOfGrammar">identifier</code> represents
the QName of an element. <span class="replacePartOfGrammar">sub rules</span> are a list 
of patterns that can consists of attributes, elements and/or text.
Attribute order is not enforced, however, element order must be in the same order specified.
            </Desc>
        </Entry>
        <Entry title="attribute">
            <GrammarText><span class="rn_kw">attribute</span> <span class="replacePartOfGrammar">identifier</span> { <span class="replacePartOfGrammar">sub rules</span> }</GrammarText>
            <Desc>
The attribute is used to describe an attribute requirement on an element within
an XML DTD. The order in which an attribute occurs within the sub rules of an element
isn't significant and doesn't prescribe an ordering like element does.
            </Desc>
        </Entry>
        <Entry title="empty">
            <GrammarText><span class="rn_kw">empty</span></GrammarText>
            <Desc>The empty keyword indicates that an element not contain text.</Desc>
        </Entry>
        <Entry title="text">
            <GrammarText><span class="rn_kw">text</span></GrammarText>
            <Desc>The text keyword indicates that an element must contain text.</Desc>
        </Entry>
        <Entry title="comma connector">
            <GrammarText><span class="replacePartOfGrammar">pattern</span>, <span class="replacePartOfGrammar">pattern</span></GrammarText>
            <Desc>The <code>,</code> is used to indicate that one pattern follows another.</Desc>
        </Entry>

        <Entry title="subexpression">
            <GrammarText>(<span class="replacePartOfGrammar">pattern expr</span>)</GrammarText>
            <Desc><code>()</code> can be used to indicate a sub expression.</Desc>
        </Entry>
        <Entry title="or">
            <GrammarText><span class="replacePartOfGrammar">pattern</span>|<span class="replacePartOfGrammar">pattern</span></GrammarText>
            <Desc>The <code>|</code> can be used to indicate multiple acceptable matches.</Desc>
        </Entry>
        <Entry title="zero or more">
            <GrammarText><span class="replacePartOfGrammar">pattern</span><span class="rn_kw">*</span></GrammarText>
            <Desc>The star represents zero or more occurrences of a previous pattern.</Desc>
        </Entry>
        <Entry title="one or more">
            <GrammarText><span class="replacePartOfGrammar">pattern</span><span class="rn_kw">+</span></GrammarText>
            <Desc>Represents one or more occurrences of a previous pattern.</Desc>
        </Entry>
        <Entry title="comment">
            <GrammarText><span class="rn_cmt">#Comment</span></GrammarText>
            <Desc>Comments start with # and go to the end of the line</Desc>
        </Entry>
        <Entry title="optional">
            <GrammarText><span class="replacePartOfGrammar">pattern</span><span class="rn_kw">?</span></GrammarText>
            <Desc>Specifies that a previous pattern is optional.</Desc>
        </Entry>
        <Entry title="unordered">
            <GrammarText><span class="replacePartOfGrammar">pattern</span> <span class="rn_kw">&amp;</span> <span class="replacePartOfGrammar">pattern</span></GrammarText>
            <Desc>Specifies that two or more patterns may occur in any order.</Desc>
        </Entry>
        <Entry title="namespaces">
            <GrammarText><span class="rn_kw">namespace</span> <span class="replacePartOfGrammar">nsName</span> = <span class="replacePartOfGrammar">"http://www.example.com/address"</span></GrammarText>
            <Desc>
This declares a namespace which can be used with other identifiers to indicate
an element is a member of a namespace.
            </Desc>
        </Entry>
        <Entry title="named rules">
            <GrammarText><span class="replacePartOfGrammar">identifier</span> <span class="rn_cmt">=</span> <span class="replacePartOfGrammar">pattern</span></GrammarText>
            <Desc>A Pattern can be named using the assignment operator. The naming of a pattern allows it to be referenced by other patterns for reuse.</Desc>
        </Entry>
    </RelaxNGHelp>



    <Namespaces>
        <Ns prefix="src" url="http://www.sdml.info/srcML/src">
            <Desc>
The src namespace is defined as the default namespace within a srcML archive. All
source code marked up by srcML, that is not preprocessor directives, is part of
this namespace.
            </Desc>
        </Ns>
        <Ns prefix="cpp" url="http://www.sdml.info/srcML/cpp">
            <Desc>
The cpp namespace is used to indicate that a directive belongs to the preprocessor
for any of the languages which have a preprocessor such as C, C++ and C#. The cpp
namespace markup can be enabled for other languages, that don't usually have a
preprocessor, such as Java by using the --cpp command line option when running srcML.
            </Desc>
        </Ns>
    </Namespaces>

    <Elements>
        <Element ns="src" elem="unit">
            <Desc>
The unit tag is used to represent two things within srcML: 1) the srcML archive format
and 2) a compilation unit
            </Desc>
            <Case title="archive unit">
                <Desc>
The archive unit only exists when there is more then one file used to create a srcML
document, otherwise, only a single compilation unit will be output.
                </Desc>
                <Grammar>
ArchiveUnit = element unit {
    CompliationUnit*
}
                </Grammar>
                <Languages>
                    <Lang language="C"/>
                    <Lang language="C++"/>
                    <Lang language="Java"/>
                    <Lang language="C#"/>
                </Languages>
                <Subelements>
                    <Subelement ns="src" name="unit" />
                </Subelements>
            </Case>

            <Case title="compilation unit">
                <Desc>A compilation unit is a single file.</Desc>
                <Subelements>
                    <!-- PreProcessor Stuff -->
                    <Subelement ns="cpp" name="define" />
                    <Subelement ns="cpp" name="elif" />
                    <Subelement ns="cpp" name="endif" />
                    <Subelement ns="cpp" name="endregion" />
                    <Subelement ns="cpp" name="error" />
                    <Subelement ns="cpp" name="if" />;
                    <Subelement ns="cpp" name="ifdef" />
                    <Subelement ns="cpp" name="ifndef" />
                    <Subelement ns="cpp" name="include" />
                    <Subelement ns="cpp" name="line" />
                    <Subelement ns="cpp" name="pragma" />
                    <Subelement ns="cpp" name="region" />
                    <Subelement ns="cpp" name="undef" />
                    <Subelement ns="cpp" name="warning" />

                    <!-- Not Preprocessor Stuff-->
                    <Subelement ns="src" name="asm" />
                    <Subelement ns="src" name="assert" />
                    <Subelement ns="src" name="block" />
                    <Subelement ns="src" name="break" />
                    <Subelement ns="src" name="case" />
                    <Subelement ns="src" name="catch" />
                    <Subelement ns="src" name="checked" />
                    <Subelement ns="src" name="class" />
                    <Subelement ns="src" name="class_decl" />
                    <Subelement ns="src" name="comment" />
                    <Subelement ns="src" name="constructor" />
                    <Subelement ns="src" name="continue" />
                    <Subelement ns="src" name="decl_stmt" />
                    <Subelement ns="src" name="default" />
                    <Subelement ns="src" name="destructor" />
                    <Subelement ns="src" name="destructor_decl" />
                    <Subelement ns="src" name="do" />
                    <Subelement ns="src" name="else" />
                    <Subelement ns="src" name="empty_stmt" />
                    <Subelement ns="src" name="elseif" />
                    <Subelement ns="src" name="enum" />
                    <Subelement ns="src" name="expr_stmt" />
                    <Subelement ns="src" name="extern" />
                    <Subelement ns="src" name="finally" />
                    <Subelement ns="src" name="fixed" />
                    <Subelement ns="src" name="for" />
                    <Subelement ns="src" name="foreach" />
                    <Subelement ns="src" name="function" />
                    <Subelement ns="src" name="function_decl" />
                    <Subelement ns="src" name="generic_selection" />
                    <Subelement ns="src" name="goto" />
                    <Subelement ns="src" name="if" />
                    <Subelement ns="src" name="import" />
                    <Subelement ns="src" name="label" />
                    <Subelement ns="src" name="linq" />
                    <Subelement ns="src" name="lock" />
                    <Subelement ns="src" name="namespace" />
                    <Subelement ns="src" name="package" />
                    <Subelement ns="src" name="private" />
                    <Subelement ns="src" name="protected" />
                    <Subelement ns="src" name="public" />
                    <Subelement ns="src" name="return" />
                    <Subelement ns="src" name="static" />
                    <Subelement ns="src" name="struct" />
                    <Subelement ns="src" name="struct_decl" />
                    <Subelement ns="src" name="switch" />
                    <Subelement ns="src" name="synchronized" />
                    <Subelement ns="src" name="throw" />
                    <Subelement ns="src" name="try" />
                    <Subelement ns="src" name="typedef" />
                    <Subelement ns="src" name="unchecked" />
                    <Subelement ns="src" name="union" />
                    <Subelement ns="src" name="union_decl" />
                    <Subelement ns="src" name="using" />
                    <Subelement ns="src" name="while" />
                </Subelements>
                <Languages>
                    <Lang language="C"/>
                    <Lang language="C++"/>
                    <Lang language="Java"/>
                    <Lang language="C#"/>
                </Languages>
                <Grammar>
CompliationUnit = element  unit {
    attribute language { "C++" | "C" | "Java" | "C#" },
    attribute filename { text },
    CompilationUnitContents
    
}

CompilationUnitContents = (
    CPPDefine &amp;
    CPPElIf &amp;
    CPPElse &amp;
    CPPEndIf &amp;
    CPPEndRegion &amp;
    CPPError &amp;
    CPPIf &amp;
    CPPIfDef &amp;
    CPPIfNDef &amp;
    CPPInclude &amp;
    CPPLine &amp;
    CPPPragma &amp;
    CPPRegion &amp;
    CPPUndef &amp;
    CPPWarning &amp;
    ASM &amp;
    StaticAssert &amp;
    AssertStmt &amp;
    Block &amp;
    Break &amp;
    CaseStmt &amp;
    CatchBlock &amp;
    CheckedBlock &amp;
    ClassInterface &amp;
    Class &amp;
    ClassDecl &amp;
    CommentBlock &amp;
    CommentLine &amp;
    ConstructorQualified &amp;
    ContinueStmt &amp;
    DeclStmt &amp;
    DefaultLabel &amp;
    Destructor &amp;
    DestructorQualified &amp;
    DestructorDecl &amp;
    DoStmt &amp;
    ElseStmt &amp;
    EmptyStmt &amp;
    elseif &amp;
    enum &amp;
    ExprStmt &amp;
    ExternBlock &amp;
    FinallyBlock &amp;
    FixedStmt &amp;
    ForStmt &amp;
    ForEachStmt &amp;
    Function &amp;
    FunctionDecl &amp;
    GenericSelection &amp;
    GotoStmt &amp;
    IfStmt &amp;
    ImportStmt &amp;
    LabelStmt &amp;
    LINQ &amp;
    LockStmt &amp;
    Namespace &amp;
    Package &amp;
    Private &amp;
    Protected &amp;
    Public &amp;
    ReturnStmt &amp;
    StaticInitBlock &amp;
    Struct &amp;
    StructDecl &amp;
    SwitchStmt &amp;
    SynchronizedStmt &amp;
    ThrowStmt &amp;
    Try &amp;
    Typedef &amp;
    UncheckedStmt &amp;
    Union &amp;
    UnionStmt &amp;
    UnsafeStmt &amp;
    UsingStmt &amp;
    UsingDirective &amp;
    WhileStmt
)*

                </Grammar>
                <Attributes>
                    <Attr name="filename" valueDesc="name or path of the file used to create this compilation unit">
                        <Languages>
                            <Lang language="C"/>
                            <Lang language="C++"/>
                            <Lang language="Java"/>
                            <Lang language="C#"/>
                        </Languages>
                    </Attr>
                    <Attr name="language" valueDesc="the language that srcML used to processes the current compilation unit">
                        <Languages>
                            <Lang language="C"/>
                            <Lang language="C++"/>
                            <Lang language="Java"/>
                            <Lang language="C#"/>
                        </Languages>
                    </Attr>
                </Attributes>
            </Case>
            <Refs>
                <See url="SOMEURI" title="Some title" />
            </Refs>
        </Element>

        <!-- CPP Elements -->
        <Element ns="cpp" elem="define" >
            <Desc>
There are two ways that a # define is used:1) used to define a single value
2) used with function like syntax.
</Desc>
            <Case title="value definition">
                <Desc>Used to define a function like macro</Desc>
                <Subelements>
                    <Subelement ns="cpp" name="directive" />
                    <Subelement ns="src" name="name" />
                </Subelements>
                <Languages>
                    <Lang language="C"/>
                    <Lang language="C++"/>
                    <Lang language="C#"/>
                </Languages>
                <Grammar>
element cpp:define {
    "#",
    element cpp:directive { "define" },
    element cpp:macro { element src:name { text } },
    element cpp:value { text }?
}

                </Grammar>
            </Case>
            <Case title="function-style definition">
                <Subelements>
                    <Subelement ns="cpp" name="directive" />
                    <Subelement ns="src" name="name" />
                </Subelements>
                <Languages>
                    <Lang language="C"/>
                    <Lang language="C++"/>
                </Languages>
                <Grammar>

element cpp:define {
    "#",
    element cpp:directive { "define" },
    element cpp:macro {
        element name { text },
        element parameter_list {
            "(",
            (MacroParam, (",", MacroParam)*)
            ")"
    },
    element cpp:value { text }?
}
MacroParam = element param {
    element type {
        (element name{ text } | element { modifier })
    }
}
                </Grammar>
            </Case>

            <Refs>
                <See url="SOMEURI" title="Some title" />
            </Refs>
        </Element>

        <!--
        <cpp:directive>
        <cpp:elif>
        <cpp:else>
        <cpp:endif>
        <cpp:endregion>
        <cpp:error>
        <cpp:file>
        <cpp:if>
        <cpp:ifdef>
        <cpp:ifndef>
        <cpp:include>
        <cpp:line>
        <cpp:literal>
        <cpp:macro>
        <cpp:number>
        <cpp:pragma>
        <cpp:region>
        <cpp:undef>
        <cpp:value>
        <cpp:warning>
        <src:alignas>
        <src:alignof>
        <src:annotation>
        <src:argument>
        <src:argument_list>
        <src:asm>
        <src:assert type="static">
        <src:assert>
        <src:association>
        <src:association_list>
        <src:atomic>
        <src:attribute>
        <src:block type="pseudo">
        <src:block>
        <src:break>
        <src:by>
        <src:call>
        <src:capture>
        <src:case>
        <src:catch>
        <src:checked>
        <src:class type="interface">
        <src:class>
        <src:class_decl>
        <src:comment type="block">
        <src:comment type="line">
        <src:condition>
        <src:constructor>
        <src:constructor_decl>
        <src:continue>
        <src:control>
        <src:decl>
        <src:decl_stmt>
        <src:decltype>
        <src:default>
        <src:destructor>
        <src:destructor_decl>
        <src:do>
        <src:else>
        <src:elseif>
        <src:empty_stmt>
        <src:enum>
        <src:equals>
        <src:expr>
        <src:expr_stmt>
        <src:extends>
        <src:extern>
        <src:finally>
        <src:fixed>
        <src:for>
        <src:foreach>
        <src:from>
        <src:function>
        <src:function_decl>
        <src:generic_selection>
        <src:goto>
        <src:group>
        <src:if>
        <src:implements>
        <src:import>
        <src:in>
        <src:incr>
        <src:index>
        <src:init>
        <src:into>
        <src:join>
        <src:label>
        <src:lambda>
        <src:let>
        <src:linq>
        <src:literal type="boolean">
        <src:literal type="char">
        <src:literal type="null">
        <src:literal type="number">
        <src:literal type="string">
        <src:lock>
        <src:macro>
        <src:member_list>
        <src:modifier>
        <src:name>
        <src:namespace>
        <src:noexcept>
        <src:on>
        <src:operator>
        <src:orderby>
        <src:package>
        <src:param>
        <src:parameter_list>
            * Macro parameters
            * Template parameters
            * function parameters

        <src:private type="default">
        <src:private>
        <src:protected>
        <src:public type="default">
        <src:public>
        <src:range>
        <src:return>
        <src:select>
        <src:selector>
        <src:sizeof>
        <src:specifier>
        <src:static>
        <src:struct>
        <src:struct_decl>
        <src:super>
        <src:switch>
        <src:synchronized>
        <src:template>
        <src:then>
        <src:throw>
        <src:throws>
        <src:try>
        <src:type ref="prev">
        <src:type>
        <src:typedef>
        <src:typeid>
        <src:typename>
        <src:unchecked>
        <src:union>
        <src:union_decl>
        <src:unit>
        <src:unsafe>
        <src:using>
        <src:where>
        <src:while>
-->


        <Element ns="src" elem="name">
            <Desc>A name can represent a single name or a complex name.</Desc>
            <TerminalCase title="single name">
                <Desc>Single identifier</Desc>
                <Values>
                    <Value lang="C,C++,C#,Java">int</Value>
                    <Value lang="C,C++,C#,Java">i</Value>
                </Values>
                <Grammar>
SingleName = element name { text }
                </Grammar>
                <Languages>
                    <Lang language="C"/>
                    <Lang language="C++"/>
                    <Lang language="Java"/>
                    <Lang language="C#"/>
                </Languages>
            </TerminalCase>
            <Refs>
                <See url="SOMEURI" title="Some title" />
            </Refs>
        </Element>
    </Elements>
</TagDoc>
